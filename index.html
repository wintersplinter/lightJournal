<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>LightJournal</title>

    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.1.6/dist/purify.min.js"></script>

    <link rel="stylesheet" href="style.css" />
    <link rel="manifest" href="manifest.webmanifest" />
  </head>
  <body>
    <main>
      <!-- h1>LightJournal</h1 -->

      <div class="toplinks">
        <a href="#" id="linkPrivacy">Privacy statement</a>
        &nbsp;|&nbsp;
        <a href="#" id="linkInstructions">Instructions</a>
        &nbsp;|&nbsp;
        <a href="#" id="linkTerms">Terms</a>
      </div>

      <div id="screenConnect" style="display: none">
        <div class="centerBox">
          <h1 class="landingTitle">LightJournal</h1>
          <button id="btnLoginLanding">Connect to Google Drive</button>
        </div>
      </div>

      <div id="screenMain">
        <button id="btnLogin" style="display: none">
          Connect Google Drive
        </button>

        <p id="status">Not connected</p>

        <hr />

        <form id="authForm" onsubmit="return false;">
          <label>
            <!--Passphrase:-->

            <label style="display: block; margin-top: 8px; opacity: 0.9">
              <input type="checkbox" id="toggleShowPass" />
              Show journal passphrase (key to your encrypted journal)
            </label>

            <input
              type="text"
              name="username"
              autocomplete="no-username"
              style="display: none"
            />

            <input
              id="pass"
              name="lightjournal-passphrase"
              type="password"
              autocomplete="current-password"
            />
          </label>
        </form>

        <br /><br />

        <label>
          New post (Markdown):
          <textarea id="editor" rows="10" style="width: 100%"></textarea>
        </label>

        <label style="display: block; margin-top: 8px">
          <input type="checkbox" id="previewToggle" checked />
          Live preview (latest)
        </label>

        <div
          id="preview"
          style="border: 1px solid #ddd; padding: 12px; margin-top: 8px"
        ></div>

        <br />

        <button id="btnUnlock">Unlock / Load posts</button>

        <button id="btnSave" disabled>Save post</button>

        <hr />

        <h2>Posts</h2>
        <div id="posts"></div>
      </div>

      <div id="overlay" class="overlay" style="display: none">
        <div class="overlayBox">
          <button id="overlayClose">Close</button>
          <iframe id="overlayFrame"></iframe>
        </div>
      </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.1.6/dist/purify.min.js"></script>
    <script type="module" src="app.js"></script>
  </body>
</html>
